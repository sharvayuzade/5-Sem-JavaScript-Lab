<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Club Performance Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: white;
            color: black;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: black;
            margin-bottom: 30px;
            font-size: 24px;
        }

        .tracker-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .team-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }

        .team-card.winner {
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 8px 25px rgba(0,0,0,0.15);
            border: 3px solid #ffd700;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 8px 25px rgba(0,0,0,0.15); }
            to { box-shadow: 0 0 50px rgba(255, 215, 0, 1), 0 8px 25px rgba(0,0,0,0.15); }
        }

        .team-card.flip {
            animation: cardFlip 0.8s ease-in-out;
        }

        @keyframes cardFlip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }

        .team-header {
            text-align: left;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ccc;
        }

        .team-name {
            font-size: 18px;
            font-weight: bold;
            color: black;
            margin-bottom: 5px;
        }

        .team-id {
            color: black;
            font-size: 14px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #000;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            flex: 1;
        }

        .slider-value {
            background: black;
            color: white;
            padding: 3px 8px;
            min-width: 30px;
            text-align: center;
        }

        .calculate-btn {
            width: 100%;
            background: black;
            color: white;
            padding: 10px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            margin: 15px 0;
        }

        .calculate-btn:hover {
            background: #333;
        }

        .results {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #667eea;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .grade {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .grade.A { color: #28a745; }
        .grade.B { color: #17a2b8; }
        .grade.C { color: #ffc107; }
        .grade.F { color: #dc3545; }

        .error {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .footer {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: white;
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .footer h3 {
            margin-bottom: 10px;
        }

        .footer p {
            margin: 5px 0;
        }

        @media (max-width: 768px) {
            .tracker-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÜ Annual Inter-Department Club Competition Tracker</h1>
        
        <div class="tracker-grid" id="trackerGrid">
            <!-- Team cards will be generated by JavaScript -->
        </div>

        <div class="footer">
            <h3>Developed by Sharvayu Zade</h3>
            <p id="currentDateTime"></p>
            <p><strong>Fun Fact:</strong> My teammate Sharvil sitting beside me is an excellent badminton player who dominates the court with his amazing skills!</p>
        </div>
    </div>

    <script>
        // Criteria weightings - manually typed as required
        const criteriaWeights = {
            round1: 0.3,  // 30% weightage
            round2: 0.4,  // 40% weightage  
            round3: 0.3   // 30% weightage
        };

        // Round 3 categories array
        let round3Categories = ['Innovation', 'Creativity', 'Technical Skills', 'Presentation', 'Teamwork', 'Leadership'];

        // Real team data from batch
        const teams = [
            {
                name: "Sports Club",
                id: "23070521136",
                memberName: "Sharvil"
            },
            {
                name: "Branding Club",
                id: "23070521135", 
                memberName: "Sharvayu"
            },
            {
                name: "Web Developer Club",
                id: "23070521156",
                memberName: "Sushmit"
            }
        ];

        // Shuffle array function
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Initialize the tracker
        function initializeTracker() {
            const trackerGrid = document.getElementById('trackerGrid');
            trackerGrid.innerHTML = '';

            teams.forEach((team, index) => {
                const shuffledCategories = shuffleArray(round3Categories);
                const teamCard = createTeamCard(team, index, shuffledCategories);
                trackerGrid.appendChild(teamCard);
            });

            updateDateTime();
        }

        function createTeamCard(team, index, categories) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'team-card';
            cardDiv.id = `team-${index}`;
            
            cardDiv.innerHTML = `
                <div class="team-header">
                    <div class="team-name">${team.name}</div>
                    <div class="team-id">ID: ${team.id} | Member: ${team.memberName}</div>
                </div>

                <div class="input-group">
                    <label>Round 1 Score (Performance):</label>
                    <div class="slider-container">
                        <input type="range" class="slider" id="round1-${index}" min="0" max="100" value="75" 
                               oninput="updateSliderValue(${index}, 'round1')">
                        <span class="slider-value" id="round1-value-${index}">75</span>
                    </div>
                </div>

                <div class="input-group">
                    <label>Round 2 Score (Technical):</label>
                    <input type="number" id="round2-${index}" min="0" max="100" value="80" 
                           placeholder="Enter score (0-100)">
                    <div class="error" id="round2-error-${index}"></div>
                </div>

                <div class="input-group">
                    <label>Round 3 Category:</label>
                    <select id="round3-category-${index}">
                        ${categories.map(cat => `<option value="${cat}">${cat}</option>`).join('')}
                    </select>
                </div>

                <div class="input-group">
                    <label>Round 3 Score:</label>
                    <input type="number" id="round3-${index}" min="0" max="100" value="70" 
                           placeholder="Enter score (0-100)">
                    <div class="error" id="round3-error-${index}"></div>
                </div>

                <button class="calculate-btn" onclick="calculateScore(${index})">Calculate Performance</button>

                <div class="results" id="results-${index}" style="display: none;">
                    <div class="result-row">
                        <span>Weighted Total:</span>
                        <span id="weighted-total-${index}">--</span>
                    </div>
                    <div class="result-row">
                        <span>Bonus Points:</span>
                        <span id="bonus-points-${index}">--</span>
                    </div>
                    <div class="result-row">
                        <span>Final Score:</span>
                        <span id="final-score-${index}">--</span>
                    </div>
                    <div class="result-row">
                        <span>Grade:</span>
                        <span class="grade" id="grade-${index}">--</span>
                    </div>
                    <div class="result-row">
                        <span>Remark:</span>
                        <span id="remark-${index}">--</span>
                    </div>
                </div>
            `;

            return cardDiv;
        }

        function updateSliderValue(teamIndex, round) {
            const slider = document.getElementById(`${round}-${teamIndex}`);
            const valueSpan = document.getElementById(`${round}-value-${teamIndex}`);
            valueSpan.textContent = slider.value;
        }

        function validateScore(score, teamIndex, round) {
            const errorElement = document.getElementById(`${round}-error-${teamIndex}`);
            if (score < 0 || score > 100 || isNaN(score)) {
                errorElement.textContent = "Score must be between 0 and 100";
                return false;
            }
            errorElement.textContent = "";
            return true;
        }

        function calculateScore(teamIndex) {
            // Get scores
            const round1Score = parseInt(document.getElementById(`round1-${teamIndex}`).value);
            const round2Score = parseInt(document.getElementById(`round2-${teamIndex}`).value);
            const round3Score = parseInt(document.getElementById(`round3-${teamIndex}`).value);
            const round3Category = document.getElementById(`round3-category-${teamIndex}`).value;

            // Validate scores
            let isValid = true;
            isValid = validateScore(round2Score, teamIndex, 'round2') && isValid;
            isValid = validateScore(round3Score, teamIndex, 'round3') && isValid;

            if (!isValid) return;

            // Calculate weighted total
            const weightedTotal = (round1Score * criteriaWeights.round1) + 
                                 (round2Score * criteriaWeights.round2) + 
                                 (round3Score * criteriaWeights.round3);

            // Calculate bonus points
            let bonusPoints = 0;
            if (round2Score > 80) bonusPoints += 5;
            if (round3Category === 'Innovation') bonusPoints += 3;
            if (round1Score >= 90) bonusPoints += 2;

            const finalScore = weightedTotal + bonusPoints;

            // Assign grade using if/else if
            let grade;
            if (finalScore >= 90) {
                grade = 'A';
            } else if (finalScore >= 75) {
                grade = 'B';
            } else if (finalScore >= 60) {
                grade = 'C';
            } else {
                grade = 'F';
            }

            // Assign remark using switch
            let remark;
            switch (grade) {
                case 'A':
                    remark = 'Outstanding';
                    break;
                case 'B':
                    remark = 'Strong';
                    break;
                case 'C':
                    remark = 'Average';
                    break;
                case 'F':
                    remark = 'Needs Improvement';
                    break;
                default:
                    remark = 'Unknown';
            }

            // Display results
            document.getElementById(`weighted-total-${teamIndex}`).textContent = weightedTotal.toFixed(2);
            document.getElementById(`bonus-points-${teamIndex}`).textContent = bonusPoints;
            document.getElementById(`final-score-${teamIndex}`).textContent = finalScore.toFixed(2);
            document.getElementById(`grade-${teamIndex}`).textContent = grade;
            document.getElementById(`grade-${teamIndex}`).className = `grade ${grade}`;
            document.getElementById(`remark-${teamIndex}`).textContent = remark;
            document.getElementById(`results-${teamIndex}`).style.display = 'block';

            // Add flip animation
            const teamCard = document.getElementById(`team-${teamIndex}`);
            teamCard.classList.add('flip');
            setTimeout(() => teamCard.classList.remove('flip'), 800);

            // Store score for winner calculation
            teams[teamIndex].finalScore = finalScore;
            teams[teamIndex].calculated = true;

            // Check if all teams are calculated and highlight winner
            setTimeout(() => checkForWinner(), 1000);
        }

        function checkForWinner() {
            const calculatedTeams = teams.filter(team => team.calculated);
            if (calculatedTeams.length !== teams.length) return;

            // Find highest score
            let maxScore = Math.max(...calculatedTeams.map(team => team.finalScore));
            const winners = calculatedTeams.filter(team => team.finalScore === maxScore);

            let winnerIndex;
            if (winners.length > 1) {
                // Tie-breaker: first letter of team name (alphabetically first wins)
                const sortedWinners = winners.sort((a, b) => a.name.localeCompare(b.name));
                const winnerTeam = sortedWinners[0];
                winnerIndex = teams.indexOf(winnerTeam);
            } else {
                const winnerTeam = winners[0];
                winnerIndex = teams.indexOf(winnerTeam);
            }

            // Remove winner class from all cards
            document.querySelectorAll('.team-card').forEach(card => {
                card.classList.remove('winner');
            });

            // Add winner class to winning card
            document.getElementById(`team-${winnerIndex}`).classList.add('winner');
        }

        function updateDateTime() {
            const now = new Date();
            const dateTimeString = now.toLocaleString('en-IN', {
                timeZone: 'Asia/Kolkata',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('currentDateTime').textContent = dateTimeString;
        }

        // Initialize the tracker when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTracker();
            // Update time every second
            setInterval(updateDateTime, 1000);
        });
    </script>
</body>
</html>